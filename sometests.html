<html>
<head>
<style>
    div {
        width: 100;
    }
</style>
<script src="ximp.js"></script>
<script>

    function paramAddTest(that, x, y){
        that.value = parseInt(x) + parseInt(y);
    }

    function donothing(that){
        that.innerHTML = "failure";
    }

    function successColor(that){
        that.style.backgroundColor = "#0F0";
        that.innerHTML = "pass";
    }
    function failureColor(that){
        that.style.backgroundColor = "#F00";
        that.innerHTML = "failure";
    }
    var sumTestVal = 0;
    function sumTest(that){
        sumTestVal += parseInt(that.textContent);
        var iteroutput = document.getElementById("testiteroutput1");
        iteroutput.value = sumTestVal;
    }
    function resetTestiteroutput1(that){
        sumTestVal = 0;
    }

    var concatString = "";
    function concatTest(that){
        concatString += that.textContent;
        var iteroutput = document.getElementById("testiteroutput2");
        iteroutput.value = concatString;
    }
    function resetTestiteroutput2(that){
        concatString = "";
    }

    var concatString = "";
    function concatTest2(that){
        concatString += that.textContent;
        var iteroutput = document.getElementById("testiteroutput3");
        iteroutput.value = concatString;
    }
    function resetTestiteroutput3(that){
        concatString = "";
    }
</script>
</head>
<body>
    <h3>Basic Test</h3>
    <input id="basicInput" value="true"></input>
    <br/><br/>
    <div ximp ximp-if="(basicInput.value)" ximp-action-failure="failureColor" ximp-action="successColor"></div>
    <br/>
    <h3>Basic Test Failure</h3>
    <input id="basicInputFailure" value="false"></input>
    <br/><br/>
    <div ximp ximp-if="(basicInputFailure.value)" ximp-action-failure="successColor" ximp-action="failureColor"></div>
    <br/>
    <h3>Input Equality Test</h3>
    <input id="eqTestInput1" value="1"></input>
    <br/>
    <input id="eqTestInput2" value="1"></input>
    <br/><br/>
    <div ximp ximp-if="(eqTestInput1.value)EQ(eqTestInput2.value)" ximp-action-failure="failureColor" ximp-action="successColor"></div>
    <br/>
    <h3>Input Equality Test Failure</h3>
    <input id="eqTestInput1Failure" value="1"></input>
    <br/>
    <input id="eqTestInput2Failure" value="2"></input>
    <br/><br/>
    <div ximp ximp-if="(eqTestInput1Failure.value)EQ(eqTestInput2Failure.value)" ximp-action-failure="successColor" ximp-action="failureColor"></div>
    <br/>
    <h3>Connective Condition Test</h3>
    <input id="connCondTestInput1" value="true"></input>
    <br/>
    <input id="connCondTestInput2" value="true"></input>
    <br/><br/>
    <div ximp ximp-if="(connCondTestInput1.value)EQ(true)AND(connCondTestInput2.value)EQ(true)" ximp-action-failure="failureColor" id="connectiveConditionTest" ximp-action="successColor"></div>
    <br/>
    <h3>Connective Condition Test Failure</h3>
    <input id="connCondTestInput1Failure" value="true"></input>
    <br/>
    <input id="connCondTestInput2Failure" value="false"></input>
    <br/><br/>
    <div ximp ximp-if="(connCondTestInput1Failure.value)AND(connCondTestInput2Failure.value)" ximp-action-failure="successColor" ximp-action="failureColor"></div>
    <br/>
    <h3>Compund Condition Test</h3>
    <input id="comCondTestInput1" value="a"></input>
    <br/>
    <input id="comCondTestInput2" value="a"></input>
    <br/>
    <input id="comCondTestInput3" value="b"></input>
    <br/>
    <input id="comCondTestInput4" value="b"></input>
    <br/><br/>
    <div ximp ximp-if="(comCondTestInput1.value)EQ(comCondTestInput2.value)AND(comCondTestInput3.value)EQ(comCondTestInput4.value)" ximp-action-failure="failureColor" ximp-action="successColor"></div>
    <h3>Compund Condition Test Failure</h3>
    <input id="comCondTestInput1Failure" value="a"></input>
    <br/>
    <input id="comCondTestInput2Failure" value="b"></input>
    <br/>
    <input id="comCondTestInput3Failure" value="a"></input>
    <br/>
    <input id="comCondTestInput4Failure" value="b"></input>
    <br/><br/>
    <div ximp ximp-if="(comCondTestInput1Failure.value)EQ(comCondTestInput2Failure.value)AND(comCondTestInput3Failure.value)EQ(comCondTestInput4Failure.value)" ximp-action-failure="successColor" ximp-action="failureColor"></div>
    <h3>Complex Compund Condition Test</h3>
    <input id="ComplexTestInput1" value="true"></input>
    <br/>
    <input id="ComplexTestInput2" value="1"></input>
    <br/>
    <input id="ComplexTestInput3" value="1"></input>
    <br/><br/>
    <div ximp ximp-if="(ComplexTestInput1.value)EQ(true)AND(ComplexTestInput2.value)EQ(ComplexTestInput3.value)" id="checkworself" ximp-action-failure="failureColor" ximp-action="successColor"></div>
    <h3>Complex Compund Condition Test Failure (1, first statement fails)</h3>
    <input id="ComplexTestInput1Failure1" value="false"></input>
    <br/>
    <input id="ComplexTestInput2Failure1" value="1"></input>
    <br/>
    <input id="ComplexTestInput3Failure1" value="1"></input>
    <br/><br/>
    <div ximp ximp-if="(ComplexTestInput1Failure1.value)EQ(true)AND(ComplexTestInput2Failure1.value)EQ(ComplexTestInput3Failure1.value)" ximp-action-failure="successColor" ximp-action="failureColor"></div>
    <h3>Complex Compund Condition Test Failure (2, second statement fails)</h3>
    <input id="ComplexTestInput1Failure2" value="true"></input>
    <br/>
    <input id="ComplexTestInput2Failure2" value="1"></input>
    <br/>
    <input id="ComplexTestInput3Failure2" value="2"></input>
    <br/><br/>
    <div ximp ximp-if="(ComplexTestInput1Failure2.value)AND(ComplexTestInput2Failure2.value)EQ(ComplexTestInput3Failure2.value)" ximp-action-failure="successColor" ximp-action="failureColor"></div>
    <h3>Complex Compund Condition Test Failure (3, Reverse structure)</h3>
    <input id="ComplexTestInput1Failure3" value="true"></input>
    <br/>
    <input id="ComplexTestInput2Failure3" value="1"></input>
    <br/>
    <input id="ComplexTestInput3Failure3" value="2"></input>
    <br/><br/>
    <div ximp ximp-if="(ComplexTestInput2Failure3.value)EQ(ComplexTestInput3Failure3.value)AND(ComplexTestInput1Failure3.value)" ximp-action-failure="successColor" ximp-action="failureColor"></div>
    <h3>Compund Condition Test ('OR')</h3>
    <input id="testOr1" value="true"></input>
    <br/>
    <input id="testOr2" value="false"></input>
    <br/><br/>
    <div ximp ximp-if="(testOr1.value)EQ(true)OR(testOr2.value)EQ(true)" ximp-action-failure="failureColor" ximp-action="successColor"></div>
    <h3>Compund Condition Test ('OR') Failure (No true)</h3>
    <input id="testOr21" value="false"></input>
    <br/>
    <input id="testOr22" value="false"></input>
    <br/><br/>
    <div ximp ximp-if="(testOr21.value)OR(testOr22.value)" ximp-action-failure="successColor" ximp-action="failureColor"></div>
    <h3>Complex Compund Condition Test ('OR')</h3>
    <input id="testOr31" value="false"></input>
    <br/>
    <input id="testOr32" value="false"></input>
    <br/><br/>
    <div ximp ximp-if="(testOr31.value)OR(testOr32.value)EQ(testOr32.value)" ximp-action-failure="failureColor" ximp-action="successColor"></div>
    <h3>Iterator Example</h3>
    <input id="testiteroutput1" type="text" value="0"></input>
    <ul ximp ximp-foreach ximp-foreach-init="resetTestiteroutput1" ximp-action="sumTest">
        <li>1</li>
        <li>2</li>
        <li>3</li>
    </ul>
    <div ximp ximp-if="(testiteroutput1.value)EQ(6)" ximp-action-failure="failureColor" ximp-action="successColor"></div>
    <br/><br/>
    <h3>Iterator Example (Condition True)</h3>
    <input id="testiteroutput2" type="text" value=""></input>
    <div ximp ximp-if="(1)EQ(1)" ximp-foreach ximp-foreach-init="resetTestiteroutput2" ximp-action="concatTest" ximp-action-failure="donothing">
        <div>a</div>
        <div>b</div>
        <div>c</div>
    </div>
    <div ximp ximp-if="(testiteroutput2.value)EQ(abc)" ximp-action-failure="failureColor" ximp-action="successColor"></div>
    <br/><br/>
    <h3>Iterator Example (Condition False - Pass)</h3>
    <input id="testiteroutput3" type="text" value=""></input>
    <div ximp ximp-if="(1)EQ(3)" ximp-foreach ximp-foreach-init="resetTestiteroutput3" ximp-action="concatTest2">
        <div>x</div>
        <div>y</div>
        <div>z</div>
    </div>
    <div ximp ximp-if="(testiteroutput3.value)NE(xyz)" ximp-action-failure="failureColor" ximp-action="successColor"></div>
    <br/><br/>
    <h3>Parameters Test</h3>
    <input ximp ximp-args="2,2" ximp-action="paramAddTest" id="testparams1" type="text" value=""></input><br/><br/>
    <div ximp ximp-if="(testparams1.value)EQ(4)" ximp-action-failure="failureColor" ximp-action="successColor">
    </div>
    <br/><br/>
    <h3>Parameters Test (Failure)</h3>
    <input ximp ximp-args="2,1" ximp-action="paramAddTest" id="testparams2" type="text" value=""></input><br/><br/>
    <div ximp ximp-if="(testparams2.value)EQ(4)" ximp-action-failure="successColor" ximp-action="failureColor">
    </div>
    <h3>Parameters Test (using id.attr syntax)</h3>
    <input type="hidden" id="paramTestFromVals1" value="10"></input>
    <input type="hidden" id="paramTestFromVals2" value="20"></input>
    <input ximp ximp-args="paramTestFromVals1.value,paramTestFromVals2.value" ximp-action="paramAddTest" id="testparams2" type="text" value=""></input><br/><br/>
    <div ximp ximp-if="(testparams2.value)EQ(30)" ximp-action-failure="successColor" ximp-action="failureColor">
    </div>
    <br/><br/>
    <h3>Parameters Test (Run-On-Conditional-True)</h3>
    <input type="hidden" id="trueput" value="true"></input>
    <input ximp ximp-if="(trueput.value)EQ(false)" ximp-args="1,1" ximp-action="paramAddTest" id="testparamsCondish" type="text"></input><br/><br/>
    <div ximp ximp-if="(testparamsCondish.value)NE(2)" ximp-action-failure="failureColor" ximp-action="successColor"> <!-- should run ximp-action-failure -->
    </div>
    <br/><br/>
</body>
</html>